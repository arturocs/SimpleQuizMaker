import{n as I,b as x,t as q}from"../chunks/DbUJxtLh.js";import{t as pt,W as Dt,aI as Ut,aJ as Ht,aB as It,V as Jt,aK as Gt,aL as Kt,av as Wt,X as W,aw as _t,ax as ht,ay as Xt,P as l,Q as L,R as n,S as N,q as yt,_ as j,Z as u,x as f,$ as y,u as $t,Y as Yt}from"../chunks/hsMS1WzM.js";import{a as Zt,s as mt}from"../chunks/Dg3ZSStG.js";import{l as M,a as B,i as H}from"../chunks/CMtDVnAk.js";import{e as Ct,i as kt}from"../chunks/Cpui_Wyf.js";import{s as J,a as G,C as K,l as ta,b as gt}from"../chunks/caAln26Z.js";import{w as aa,d as zt,c as ea}from"../chunks/QaqKAikp.js";import{b as wt}from"../chunks/DzaC_z8c.js";import"../chunks/ZYj2PoyX.js";import{N as ra,P as Et,b as sa,C as oa}from"../chunks/CLhrT2PF.js";import{c as ia}from"../chunks/DCg5tNew.js";import{Q as na}from"../chunks/BYQJR5mo.js";const la=()=>performance.now(),T={tick:r=>requestAnimationFrame(r),now:()=>la(),tasks:new Set};function Lt(){const r=T.now();T.tasks.forEach(t=>{t.c(r)||(T.tasks.delete(t),t.f())}),T.tasks.size!==0&&T.tick(Lt)}function va(r){let t;return T.tasks.size===0&&T.tick(Lt),{promise:new Promise(a=>{T.tasks.add(t={c:r,f:a})}),abort(){T.tasks.delete(t)}}}function rt(r,t){aa(()=>{r.dispatchEvent(new CustomEvent(t))})}function ca(r){if(r==="float")return"cssFloat";if(r==="offset")return"cssOffset";if(r.startsWith("--"))return r;const t=r.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(a=>a[0].toUpperCase()+a.slice(1)).join("")}function xt(r){const t={},a=r.split(";");for(const s of a){const[e,c]=s.split(":");if(!e||c===void 0)break;const i=ca(e.trim());t[i]=c.trim()}return t}const da=r=>r;function ua(r,t,a,s){var e=(r&Gt)!==0,c="both",i,C=t.inert,R=t.style.overflow,h,_;function g(){var w=Xt,P=pt;_t(null),ht(null);try{return i??(i=a()(t,(s==null?void 0:s())??{},{direction:c}))}finally{_t(w),ht(P)}}var A={is_global:e,in(){t.inert=C,rt(t,"introstart"),h=nt(t,g(),_,1,()=>{rt(t,"introend"),h==null||h.abort(),h=i=void 0,t.style.overflow=R})},out(w){t.inert=!0,rt(t,"outrostart"),_=nt(t,g(),h,0,()=>{rt(t,"outroend"),w==null||w()})},stop:()=>{h==null||h.abort(),_==null||_.abort()}},$=pt;if(($.transitions??($.transitions=[])).push(A),Zt){var k=e;if(!k){for(var p=$.parent;p&&(p.f&Dt)!==0;)for(;(p=p.parent)&&(p.f&Ut)===0;);k=!p||(p.f&Ht)!==0}k&&It(()=>{Jt(()=>A.in())})}}function nt(r,t,a,s,e){var c=s===1;if(Kt(t)){var i,C=!1;return Wt(()=>{if(!C){var w=t({direction:c?"in":"out"});i=nt(r,w,a,s,e)}}),{abort:()=>{C=!0,i==null||i.abort()},deactivate:()=>i.deactivate(),reset:()=>i.reset(),t:()=>i.t()}}if(a==null||a.deactivate(),!(t!=null&&t.duration))return e(),{abort:W,deactivate:W,reset:W,t:()=>s};const{delay:R=0,css:h,tick:_,easing:g=da}=t;var A=[];if(c&&a===void 0&&(_&&_(0,1),h)){var $=xt(h(0,1));A.push($,$)}var k=()=>1-s,p=r.animate(A,{duration:R});return p.onfinish=()=>{var w=(a==null?void 0:a.t())??1-s;a==null||a.abort();var P=s-w,m=t.duration*Math.abs(P),V=[];if(m>0){var S=!1;if(h)for(var X=Math.ceil(m/16.666666666666668),D=0;D<=X;D+=1){var Y=w+P*g(D/X),Z=xt(h(Y,1-Y));V.push(Z),S||(S=Z.overflow==="hidden")}S&&(r.style.overflow="hidden"),k=()=>{var Q=p.currentTime;return w+P*g(Q/m)},_&&va(()=>{if(p.playState!=="running")return!1;var Q=k();return _(Q,1-Q),!0})}p=r.animate(V,{duration:m,fill:"forwards"}),p.onfinish=()=>{k=()=>s,_==null||_(s,1-s),e()}},{abort:()=>{p&&(p.cancel(),p.effect=null,p.onfinish=W)},deactivate:()=>{e=W},reset:()=>{s===0&&(_==null||_(1,0))},t:()=>k()}}const fa=r=>r;function ba(r,{delay:t=0,duration:a=400,easing:s=fa}={}){const e=+getComputedStyle(r).opacity;return{delay:t,duration:a,easing:s,css:c=>`opacity: ${c*e}`}}var pa=I('<svg><!><path d="M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708l-3-3zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207l6.5-6.5zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.499.499 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11l.178-.178z"></path></svg>');function _a(r,t){const a=M(t,["children","$$slots","$$events","$$legacy"]),s=M(a,[]);var e=pa();let c;var i=l(e);J(i,t,"default",{}),L(),n(e),N(()=>c=G(e,c,{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",...s,[K]:{bi:!0,"bi-pencil-fill":!0}})),x(r,e)}var ha=I('<svg><!><path d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z"></path></svg>');function ma(r,t){const a=M(t,["children","$$slots","$$events","$$legacy"]),s=M(a,[]);var e=ha();let c;var i=l(e);J(i,t,"default",{}),L(),n(e),N(()=>c=G(e,c,{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",...s,[K]:{bi:!0,"bi-trash-fill":!0}})),x(r,e)}var ga=I('<svg><!><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"></path></svg>');function wa(r,t){const a=M(t,["children","$$slots","$$events","$$legacy"]),s=M(a,[]);var e=ga();let c;var i=l(e);J(i,t,"default",{}),L(),n(e),N(()=>c=G(e,c,{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",...s,[K]:{bi:!0,"bi-x-circle-fill":!0}})),x(r,e)}function xa(r,t){y(t,B([...f(t),{text:"",isCorrect:!1}]))}function ya(r,t,a,s,e,c){if(t()){const i={questionText:f(a),options:f(s)};e.onUpdate&&e.onUpdate(i),c("update",i)}}function $a(r,t){t("cancel")}var Ca=q('<div class="card w-full max-w-3xl bg-base-100 mx-auto"><div class="card-body"><h2 class="card-title text-2xl font-bold">Editar pregunta</h2> <div class="form-control w-full pb-6"><label class="label" for="question-text"><span class="label-text font-medium">Enunciado de la pregunta:</span></label> <textarea id="question-text" placeholder="Escribe aquí el enunciado de la pregunta" rows="3" class="textarea textarea-bordered w-full"></textarea></div> <div class="mt-6"><h3 class="text-lg font-semibold mb-2">Opciones de respuesta</h3> <div class="space-y-3"></div> <button type="button" class="btn btn-success btn-sm mt-3"><!> Añadir opción</button></div> <div class="card-actions justify-end mt-6 gap-2"><button type="button" class="btn btn-outline">Cancelar</button> <button type="button" class="btn btn-primary">Guardar cambios</button></div></div></div>');function ka(r,t){yt(t,!0);let a=j(B(t.questionData.questionText)),s=j(B([...t.questionData.options]));const e=ia();function c(m){y(s,B(f(s).filter((V,S)=>S!==m)))}function i(){return f(a).trim()!==""&&f(s).length>=2&&f(s).every(m=>m.text.trim()!=="")&&f(s).some(m=>m.isCorrect)}var C=Ca(),R=l(C),h=u(l(R),2),_=u(l(h),2);ea(_),n(h);var g=u(h,2),A=u(l(g),2);Ct(A,21,()=>f(s),kt,(m,V,S)=>{ra(m,{get options(){return f(s)},get option(){return f(V)},currentOptionIndex:S,removeOption:c})}),n(A);var $=u(A,2);$.__click=[xa,s];var k=l($);Et(k,{}),L(),n($),n(g);var p=u(g,2),w=l(p);w.__click=[$a,e];var P=u(w,2);P.__click=[ya,i,a,s,t,e],n(p),n(R),n(C),N(m=>P.disabled=m,[()=>!i()]),sa(_,()=>f(a),m=>y(a,m)),x(r,C),$t()}zt(["click"]);var za=I('<svg><!><path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"></path></svg>');function Ea(r,t){const a=M(t,["children","$$slots","$$events","$$legacy"]),s=M(a,[]);var e=za();let c;var i=l(e);J(i,t,"default",{}),L(),n(e),N(()=>c=G(e,c,{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",...s,[K]:{bi:!0,"bi-play-fill":!0}})),x(r,e)}var La=I('<svg><!><path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"></path><path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"></path></svg>');function Ma(r,t){const a=M(t,["children","$$slots","$$events","$$legacy"]),s=M(a,[]);var e=La();let c;var i=l(e);J(i,t,"default",{}),L(2),n(e),N(()=>c=G(e,c,{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",...s,[K]:{bi:!0,"bi-download":!0}})),x(r,e)}var Aa=I('<svg><!><path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"></path><path d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z"></path></svg>');function Pa(r,t){const a=M(t,["children","$$slots","$$events","$$legacy"]),s=M(a,[]);var e=Aa();let c;var i=l(e);J(i,t,"default",{}),L(2),n(e),N(()=>c=G(e,c,{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",...s,[K]:{bi:!0,"bi-upload":!0}})),x(r,e)}function Fa(r,t,a,s){f(t)>=0&&(a.value=a.value.filter((e,c)=>c!==f(t)),s())}var Oa=q('<div class="alert alert-info"><div>No hay preguntas guardadas. ¡Crea una nueva pregunta!</div></div>'),Sa=q('<tr class="hover"><td><div class="font-medium"> </div></td><td><div class="text-sm opacity-80"> </div></td><td class="flex gap-2"><button class="btn btn-sm btn-outline btn-success" title="Realizar test"><!></button> <button class="btn btn-sm btn-outline btn-info" title="Editar pregunta"><!></button> <button class="btn btn-sm btn-outline btn-error" title="Borrar pregunta"><!></button></td></tr>'),qa=q('<div class="overflow-x-auto"><table class="table w-full"><thead><tr><th>Pregunta</th><th>Respuesta(s) Correcta(s)</th><th class="w-40">Acciones</th></tr></thead><tbody></tbody></table></div>'),Va=q('<div class="alert alert-success mt-2 mb-4"><div class="flex items-center gap-2"><!> <span>Cambios guardados correctamente</span></div></div>'),Ta=q('<button class="btn btn-outline btn-info btn-sm gap-2"><!> Exportar Preguntas</button>'),Ra=q('<div class="modal modal-open"><div class="modal-box max-w-4xl w-11/12"><button class="btn btn-sm btn-circle absolute right-2 top-2">✕</button> <h3 class="font-bold text-xl mb-4">Realizar Test</h3> <!> <div class="modal-action"><button class="btn btn-primary">Cerrar</button></div></div></div>'),Ba=q(`<div class="modal modal-open"><div class="modal-box"><h3 class="font-bold text-lg flex items-center gap-2"><!> Confirmar borrado</h3> <p class="py-4">¿Estás seguro de que quieres borrar esta pregunta? Esta acción
                no se puede deshacer.</p> <div class="modal-action"><button class="btn btn-outline">Cancelar</button> <button class="btn btn-error">Borrar</button></div></div></div>`),Na=q('<div class="modal modal-open"><div class="modal-box max-w-5xl w-11/12"><button class="btn btn-sm btn-circle absolute right-2 top-2">✕</button> <!></div></div>'),Qa=q('<div class="container mx-auto px-4 py-8 max-w-4xl rounded-lg shadow-xl"><div class="flex justify-between items-center mb-6"><h1 class="text-3xl font-bold">Listado de Preguntas</h1> <a class="btn btn-outline btn-primary btn-sm gap-2"><!> Nueva pregunta</a></div> <!> <!> <div class="mt-6 flex gap-2"><a class="btn btn-outline btn-sm">Volver al inicio</a> <!> <button class="btn btn-outline btn-secondary btn-sm gap-2"><!> Importar</button></div></div> <!> <!> <!>',1);function te(r,t){yt(t,!0);let a=B(ta("questions",[])),s=j(!1),e=j(!1),c=j(!1),i=j(-1),C=j(!1);function R(o){y(i,B(o)),y(s,!0)}function h(o){y(i,B(o)),y(e,!0)}function _(o){y(i,B(o)),y(c,!0)}function g(){y(s,!1),y(e,!1),y(c,!1),y(i,-1)}function A(o){f(i)>=0&&(a.value=a.value.map((v,d)=>d===f(i)?o:v),g())}function $(o,v=60){return o.length<=v?o:o.substring(0,v)+"..."}function k(o){const v=o.filter(d=>d.isCorrect).map(d=>d.text);return v.length===0?"Sin respuesta correcta":v.map(d=>d.length>20?d.substring(0,20)+"...":d).join(", ")}function p(){const o=JSON.stringify(a.value,null,2),v=new Blob([o],{type:"application/json"}),d=URL.createObjectURL(v),b=document.createElement("a");b.href=d,b.download=`quiz-preguntas-${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(b),b.click(),document.body.removeChild(b),URL.revokeObjectURL(d)}function w(){const o=document.createElement("input");o.type="file",o.accept="application/json",o.onchange=v=>{var F;const d=(F=v.target.files)==null?void 0:F[0];if(!d)return;const b=new FileReader;b.onload=z=>{var O;try{const E=JSON.parse((O=z.target)==null?void 0:O.result);if(!Array.isArray(E)){alert("Formato de archivo inválido. Debe ser un array de preguntas.");return}if(!E.every(U=>U.questionText&&Array.isArray(U.options)&&U.options.length>=2)){alert("Algunas preguntas tienen un formato inválido.");return}a.value=[...a.value,...E],alert(`${E.length} preguntas importadas correctamente.`)}catch(E){alert("Error al procesar el archivo: "+E)}},b.readAsText(d)},o.click()}var P=Qa(),m=Yt(P),V=l(m),S=u(l(V),2);gt(S,"href",`${wt??""}/new_quiz`);var X=l(S);Et(X,{}),L(),n(S),n(V);var D=u(V,2);{var Y=o=>{var v=Oa();x(o,v)},Z=o=>{var v=qa(),d=l(v),b=u(l(d));Ct(b,21,()=>a.value,kt,(F,z,O)=>{var E=Sa(),tt=l(E),U=l(tt),Vt=l(U,!0);n(U),n(tt);var ot=u(tt),ft=l(ot),Tt=l(ft,!0);n(ft),n(ot);var bt=u(ot),at=l(bt);at.__click=()=>_(O);var Rt=l(at);Ea(Rt,{}),n(at);var et=u(at,2);et.__click=()=>h(O);var Bt=l(et);_a(Bt,{}),n(et);var it=u(et,2);it.__click=()=>R(O);var Nt=l(it);ma(Nt,{}),n(it),n(bt),n(E),N((Qt,jt)=>{mt(Vt,Qt),mt(Tt,jt)},[()=>$(f(z).questionText),()=>k(f(z).options)]),x(F,E)}),n(b),n(d),n(v),x(o,v)};H(D,o=>{a.value.length===0?o(Y):o(Z,!1)})}var Q=u(D,2);{var Mt=o=>{var v=Va(),d=l(v),b=l(d);oa(b,{class:"flex-shrink-0 h-6 w-6"}),L(2),n(d),n(v),ua(3,v,()=>ba,()=>({duration:300})),x(o,v)};H(Q,o=>{f(C)&&o(Mt)})}var lt=u(Q,2),vt=l(lt);gt(vt,"href",`${wt??""}/`);var ct=u(vt,2);{var At=o=>{var v=Ta();v.__click=p;var d=l(v);Ma(d,{}),L(),n(v),x(o,v)};H(ct,o=>{a.value.length>0&&o(At)})}var st=u(ct,2);st.__click=w;var Pt=l(st);Pa(Pt,{}),L(),n(st),n(lt),n(m);var dt=u(m,2);{var Ft=o=>{var v=Ra(),d=l(v),b=l(d);b.__click=g;var F=u(b,4);na(F,{get question(){return a.value[f(i)]}});var z=u(F,2),O=l(z);O.__click=g,n(z),n(d),n(v),x(o,v)};H(dt,o=>{f(c)&&f(i)>=0&&o(Ft)})}var ut=u(dt,2);{var Ot=o=>{var v=Ba(),d=l(v),b=l(d),F=l(b);wa(F,{class:"text-error"}),L(),n(b);var z=u(b,4),O=l(z);O.__click=g;var E=u(O,2);E.__click=[Fa,i,a,g],n(z),n(d),n(v),x(o,v)};H(ut,o=>{f(s)&&o(Ot)})}var St=u(ut,2);{var qt=o=>{var v=Na(),d=l(v),b=l(d);b.__click=g;var F=u(b,2);ka(F,{get questionData(){return a.value[f(i)]},onUpdate:z=>{A(z),y(C,!0),setTimeout(()=>{y(C,!1)},3e3),g()},$$events:{cancel:g}}),n(d),n(v),x(o,v)};H(St,o=>{f(e)&&f(i)>=0&&o(qt)})}x(r,P),$t()}zt(["click"]);export{te as component};
